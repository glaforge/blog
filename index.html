<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cédric Champeau's blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">    

    <!-- Le styles -->
    <link href="/blog/css/bootstrap.min.css" rel="stylesheet">
    <link href="/blog/css/asciidoctor.css" rel="stylesheet">
    <link href="/blog/css/base.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
    </head>
  <body>
	<div id="fb-root"></div>
	<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<script src="//platform.linkedin.com/in.js" type="text/javascript">
 lang: en_US
</script>
    <div id="wrap">
	
	<!-- Fixed navbar -->
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
          <div class="container">
	    <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/blog">Cédric Champeau's blog</a>
	    </div>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav">                
                <li><a href="/blog/about.html">About</a></li>
		<li><a href="/blog/projects.html">Projects</a></li>
		<li><a href="/blog/conferences.html">Conferences</a></li>
		<li class="dropdown">
          		<a data-toggle="dropdown" href="#">Topics<b class="caret"></b></a>
		          <ul class="dropdown-menu" role="menu">
				<li><a href="/blog/tags/groovy.html">Groovy</a></li>
				<li><a href="/blog/2013/07/30/deck2pdf_exporting_html5_slide_decks.html">deck2pdf</a></li>
				<li><a href="/blog/tags/jlangdetect.html">JLangDetect</a></li>
		          </ul>
	       </li>
                <li><a href="/blog/feed.xml">Feed</a></li>                
              </ul>
	      <ul class="nav navbar-nav navbar-right">
	      	<li><a href="https://github.com/melix"><i class="fa fa-github"></i></a></li>
	        <li><a href="https://twitter.com/CedricChampeau"><i class="fa fa-twitter"></i></a>
	      </ul>
            </div>
          </div>
      </div>
      <div class="container">

	<div class="page-header">
		<h1>Blog</h1>
		<h2>Next conferences</h2>
		<div class="lanyrd-target-splat"><a href="http://lanyrd.com/profile/cedricchampeau/" class="lanyrd-splat lanyrd-number-3 lanyrd-context-future" rel="me">My conferences on Lanyrd</a></div>
	</div>
  			<a href="/blog/2014/07/new-groovy-website.html"><h1>The new Groovy website</h1></a>
  			<p>18 juillet 2014</p>
			<p><em>Tags: </em>
		<a href="/blog/tags/groovy.html">groovy</a> 
	
		<a href="/blog/tags/templating.html">templating</a> 
	
		<a href="/blog/tags/gradle.html">gradle</a> 
	
		<a href="/blog/tags/markup-template-engine.html">markup template engine</a> 
	</p>
			<a href="https://twitter.com/share" class="twitter-share-button" data-text="The new Groovy website" data-url="http://melix.github.io/blog/2014/07/new-groovy-website.html" data-via="CedricChampeau" data-lang="fr">Tweeter</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
			<div class="g-plusone" data-size="medium" data-href="http://melix.github.io/blog/2014/07/new-groovy-website.html"></div>
		        <script id='fbvpgng2014/07/new-groovy-website.html'>(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//api.flattr.com/button/view/?uid=CedricChampeau&button=compact&url='+encodeURIComponent('http://melix.github.io/blog/2014/07/new-groovy-website.html');f.title='Flattr';f.height=20;f.width=110;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fbvpgng2014/07/new-groovy-website.html');</script>

			<script type="IN/Share" data-url="http://melix.github.io/blog/2014/07/new-groovy-website.html" data-counter="right"></script>
			<div class="fb-like" data-href="http://melix.github.io/blog/2014/07/new-groovy-website.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div>

  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Last week, we revealed the beta of a <a href="http://beta.groovy-lang.org">brand new website for the Groovy language</a>. This
new website is <a href="https://github.com/groovy/groovy-website">open sourced</a> and already received a few contributions.
In order to make it even easier and as it a fully statically generated site that makes use of Groovy
I wanted to give more technical details on the toolchain and how it is generated.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_static_website">A static website</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the first questions which arised was: <em>why not use Grails/Spring Boot/Ratpack?</em> In fact, the
new Groovy website is fully statically generated. It offers multiple advantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>hosting is much easier, as it only consists of static pages and assets</p>
</li>
<li>
<p>maintenance is simplified, no database to backup for example</p>
</li>
<li>
<p>everything is self contained, pages and data, into a <a href="https://github.com/groovy/groovy-website">single repository</a></p>
</li>
<li>
<p>no need for authentication</p>
</li>
<li>
<p>all content is public</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Last but not least, we didn&#8217;t have any requirement for storing anything in a database, or that would
require dynamic generation. Pull requests are enough so far. Eventually, we&#8217;re thinking about a
blog, but even that can be statically generated even if you want to allow users to comment on articles
(this blog is a perfect example). So in short, this decision was motivated by one mantra:
<em>the right tool for the right job</em>.</p>
</div>
<div class="paragraph">
<p>The documentation, that you can find on <a href="http://beta.groovy-lang.org/documentation.html">this page</a>, had
already started migrating from the aging wiki to . It is generated independently of the
website and integrated into it using iframes (we&#8217;re thinking about source integration though).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_structure_of_the_project">Structure of the project</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_generator_and_site">Generator and site</h3>
<div class="paragraph">
<p>The <a href="https://github.com/groovy/groovy-website">project</a> is built using <a href="http://www.gradle.org">Gradle 2</a> and consists of 2 subprojects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <a href="https://github.com/groovy/groovy-website/tree/master/generator">generator</a> project contains, as the name says,
the static generator. It makes use of a <a href="#template-engine">template engine</a> and provides the classes used in the model
of the templates.</p>
</li>
<li>
<p>the <a href="https://github.com/groovy/groovy-website/tree/master/site">site</a> project contains the templates and data. If you&#8217;re
looking into contributing contents, this is likely the place to look at.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Building and testing the site is easy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>git clone https://github.com/groovy/groovy-website.git          <i class="conum" data-value="1"></i><b>(1)</b>
cd groovy-website
./gradlew generate                                              <i class="conum" data-value="2"></i><b>(2)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>clones the repository</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>generates the website from templates</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The output will be visible in <code>&lt;project directory&gt;/site/build/site</code>. There&#8217;s also a <code>checkDeadlinks</code> tasks that we will
use once we get out of the beta phase to ensure that the generated pages do not contain any dead link.</p>
</div>
<div class="paragraph">
<p>Internally, we use our <a href="http://ci.groovy-lang.org/viewType.html?buildTypeId=Groovy_Website&amp;guest=1">CI server</a> to deploy
changes to the <code>master</code> branch live. So any commit which is pushed onto the master branch is automatically published
(in general, takes less than 2 minutes).</p>
</div>
</div>
<div class="sect2">
<h3 id="_adding_contents">Adding contents</h3>
<div class="paragraph">
<p>Even if the site is statically generated, we still have data. In this project, there&#8217;s an important file, named
<a href="https://github.com/groovy/groovy-website/blob/master/site/src/site/sitemap.groovy">sitemap.groovy</a> which handles a lot
of the contents of the website. It is our "low cost" database and as you can see, it&#8217;s a DSL describing the contents
of the website.</p>
</div>
<div class="paragraph">
<p>For example, you can see the <code>menu</code> section which looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint groovy language-groovy"><code>menu {
    group('Groovy') {
        item 'Learn',                       'learn.html'
        item 'Documentation',               'documentation.html'
        item 'Download',                    'download.html'
        item 'Community',                   'community.html'
        item 'Ecosystem',                   'ecosystem.html'
    }

    group('About') {
        item 'Contributing',                'contribute.html'
        item 'Source code',                 'https://github.com/groovy/groovy-core'
        item 'Books',                       'learn.html#books'
        item 'Sponsors',                    'sponsors.html'
        item 'FAQ',                         'faq.html'
        item 'Search',                      'search.html'
    }

    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is a purely declarative description of the site menus. Actually, the "Groups" are used in the footer of the page,
while the main <code>Groovy</code> group is used to generate the top navigation bar. Using a simple descriptive DSL is very interesting,
because it decouples templates from the contents of the menu. We make sure that those templates do not contain any element
which is hardcoded and reduce the risks of forgetting to update the footer, for example, if a section is added.</p>
</div>
<div class="paragraph">
<p>The same file is used to describe the list of downloads:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint groovy language-groovy"><code>downloads {
    // ...
    distribution('Groovy 2.3') {
        description {
            yield 'Groovy 2.3 is our latest official '
            a(href: 'versioning.html', 'version')
            yield ' of Groovy.'
        }

        version('2.3.4') {
            stable true
            releaseNotes 'https://jira.codehaus.org/secure/ReleaseNote.jspa?projectId=10242&amp;version=20432'
            windowsInstaller 'http://dist.codehaus.org/groovy/distributions/installers/windows/nsis/groovy-2.3.4-installer.exe'
        }
    }
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or the books which are listed on the <a href="http://beta.groovy-lang.org/learn.html">learn page</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint groovy language-groovy"><code>books {
    book('Groovy in Action, 2nd edition') {
        authors "Dierk König, Guillaume Laforge, Paul King, Cédric Champeau, Hamlet D'Arcy, Erik Pragt, and Jon Skeet"
        cover 'img/books/regina.png'
        url 'http://www.manning.com/koenig2/'
        description 'The undisputed definitive reference on the Groovy programming language, authored by core members of the development team.'
    }
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same is done for all contents that need regular updates: user groups, events, projects of the ecosystem, &#8230; I think
this DSL provides a very nice way to add contents to the website without caring about where it has to be done. You can
really think of it as a small database, but making use of a Groovy DSL.</p>
</div>
<div class="paragraph">
<p>In addition, this file also declares the <a href="https://github.com/groovy/groovy-website/blob/03e3806cf26af6b13d99e6ee7473687e3f36fedd/site/src/site/sitemap.groovy#L62-L74">mapping between pages in the documentation section</a>
and <a href="http://beta.groovy-lang.org/documentation.html">the documentation page</a>. Last but not least, it lists the individual
pages that the website contain. Those pages make use of the <a href="http://beta.groovy-lang.org/docs/latest/html/documentation/markup-template-engine.html">markup template engine</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_eat_your_own_dog_food">Eat your own dog food</h3>
<div class="paragraph">
<p>In Groovy 2.3, we introduced a new <a href="http://beta.groovy-lang.org/docs/latest/html/documentation/markup-template-engine.html">markup template engine</a>. We decided that the new web site was an excellent showcase of
this template engine, and a real life use case. This template engine has several remarkable features, like static compilation
of templates (even if the model is dynamic), layouts and of course a human readable builder like syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint groovy language-groovy"><code>html {
   head {
    title 'Groovy markup template engine in action!'
   }
   body {
    ul {
        features.each { f-&gt; li(f.name) }
    }
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It has already been integrated into <a href="https://spring.io/blog/2014/05/28/using-the-innovative-groovy-template-engine-in-spring-boot">Spring Boot</a>
and <a href="http://www.ratpack.io/">Ratpack</a> will use it in the next version (to be released on August 1st). A hint about its performance can be found <a href="https://github.com/ratpack/ratpack/pull/370">here</a>.
If you are interested in details about how it works, you can find the documentation <a href="http://beta.groovy-lang.org/docs/latest/html/documentation/markup-template-engine.html">here</a>
and you can read my <a href="http://melix.github.io/blog/2014/02/markuptemplateengine.html">blog posts</a> about it.</p>
</div>
<div class="paragraph">
<p>The website subproject is therefore organized accordingly. Inside the <a href="https://github.com/groovy/groovy-website/tree/master/site/src/site">main source tree</a>, you&#8217;ll find the following directories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>assets: contains static assets, like Javascript, CSS, images, &#8230;</p>
</li>
<li>
<p>html: contains pure HTML files which are easier to embed as is than using a markup syntax</p>
</li>
<li>
<p>includes: contains elements of code which are shared among multiple templates</p>
</li>
<li>
<p>layouts: contains template layouts, as defined in the <a href="http://beta.groovy-lang.org/docs/latest/html/documentation/markup-template-engine.html#_layouts">documentation</a></p>
</li>
<li>
<p>pages: contains the main pages of the website</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In general, consider <code>pages</code> as the entry point. A page generally makes use of one layout. As an example, let&#8217;s see how
the <a href="http://beta.groovy-lang.org/ecosystem.html">Ecosystem</a> page is generated. The source file consists of this:</p>
</div>
<div class="listingblock">
<div class="title">ecosystem.groovy</div>
<div class="content">
<pre class="prettyprint groovy language-groovy"><code>layout 'layouts/main.groovy', true,                                             <i class="conum" data-value="1"></i><b>(1)</b>
    pageTitle: 'The Groovy programming language - Ecosystem',                   <i class="conum" data-value="2"></i><b>(2)</b>
    mainContent: contents {                                                     <i class="conum" data-value="3"></i><b>(3)</b>
      div(id: 'content', class: 'page-1') {
        section(class: 'row') {
          div(class: 'row-fluid') {
            // ... snip side menu ...
            div(class: 'col-lg-8 col-lg-pull-0') {
              include template: 'includes/contribute-button.groovy'             <i class="conum" data-value="4"></i><b>(4)</b>
              h1 {
                i(class: 'fa fa-leaf') {}
                yield ' Ecosystem'
              }
              p {
                yield '''
                    Beside the language and its API, Groovy gave birth   ...
                    on various themes such as web frameworks, desktop    ...
                    In this section, we will highlight a few of the most ...
                    which leverage Groovy at their core.
              '''
              }
              hr(class: 'divider')

              ecosys.eachWithIndex { e, index -&gt;                                <i class="conum" data-value="5"></i><b>(5)</b>
                def (name, item) = [e.key, e.value]
                article {
                  a(name: "${name}") {}
                  div(class:"content-heading clearfix media") {
                    div {
                      if (item.logo) {
                        img class: "pull-${(index % 2 == 0) ? 'left' : 'right'}",
                          src: item.logo, alt: name, hspace: '20px'
                      } else {
                        h2(name)
                      }
                      p(item.description)
                    }
                    a(href: item.url, target:'_blank', "Learn more...")
                  }
                }
                hr(class: 'divider')
              }
              // ...
            }
          }
        }
      }
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>make use of the <code>main</code> layout</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the layout requires a <code>pageTitle</code> variable</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>as well as a <code>mainContent</code> section corresponding to the main page contents</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>example of use of an <code>include</code></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>iterates over the <code>ecosys</code> variable which contains the list of ecosystem projects as found in the sitemap</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As you can see, this template format has the advantage of taking care of generating markup for you. You won&#8217;t hit your
head again on the wall to find an unclosed tag. Everything is embedded, readable and concise.</p>
</div>
</div>
<div class="sect2">
<h3 id="_lessons_learnt">Lessons learnt</h3>
<div class="paragraph">
<p>Using the <a href="http://beta.groovy-lang.org/docs/latest/html/documentation/markup-template-engine.html">markup template engine</a> for this project was interesting, because it was probably the first "real life" project
to use it intensively. And as such, we discovered usability issues, but also bugs. Hopefully, none of those bugs or
usability features were critical, and everything could be worked around, but expect some fixes in Groovy 2.3.5. It is
also the reason why the project initially used <a href="http://www.gradle.org">Gradle 2</a>: it comes with Groovy 2.3.2 which embeds the <a href="http://beta.groovy-lang.org/docs/latest/html/documentation/markup-template-engine.html">markup template engine</a>,
so it was possible to use it <strong>without</strong> organizing the project into separate modules like we have. In fact, the early
versions of the site didn&#8217;t use subprojects. It&#8217;s only when we wanted to leverage improvements from Groovy 2.3.4 that
we had to <a href="https://github.com/groovy/groovy-website/commit/e922701f747dbb78a7e695796c60d2b783f7e7ee">switch to that architecture</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_team_work">A team work</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the end, I can&#8217;t finish this blog post without mentionning the team work it implied. In particular:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://twitter.com/oodamien">Damien Vitrac</a> designed the website and produced HTML sketches. If you think the new site
looks good, thank this guy!</p>
</li>
<li>
<p><a href="https://twitter.com/glaforge">Guillaume Laforge</a> designed the site architecture, wrote contents, tweaked the CSS, that is to
say produced almost all contents. He spent countless hours fixing responsiveness issues and digging into front-end dev.</p>
</li>
<li>
<p><a href="https://twitter.com/CedricChampeau">I streamlined</a> the process by setting up the Gradle project, designing the sitemap DSL,
the integration of the <a href="http://beta.groovy-lang.org/docs/latest/html/documentation/markup-template-engine.html">markup template engine</a>, CI integration, &#8230; that is to say pretty much all the "backend" stuff.</p>
</li>
<li>
<p><strong>You</strong>, as a community, provided awesome <a href="https://github.com/groovy/groovy-website/pulls?direction=desc&amp;page=1&amp;sort=created&amp;state=closed">pull requests</a> within hours. Keep them coming, we love it!</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of us have different skills. Guillaume is far better than I am in any kind of web design, styling issues, etc for example, so in the
end, I think the combination works quite good and that the site as it is now is already pretty usable.</p>
</div>
<div class="paragraph">
<p>Let us know what you think, and don&#8217;t forget that you can contribute, it&#8217;s easy!</p>
</div>
</div>
</div></p>
			<p><a href="/blog/2014/07/new-groovy-website.html#disqus_thread">Comments</a></p>
  			<a href="/blog/2014/06/contribute-groovy-ide.html"><h1>Contributing for the Groovy language: setting up IntelliJ IDEA</h1></a>
  			<p>24 juin 2014</p>
			<p><em>Tags: </em>
		<a href="/blog/tags/groovy.html">groovy</a> 
	
		<a href="/blog/tags/intellij.html">intellij</a> 
	
		<a href="/blog/tags/gradle.html">gradle</a> 
	</p>
			<a href="https://twitter.com/share" class="twitter-share-button" data-text="Contributing for the Groovy language: setting up IntelliJ IDEA" data-url="http://melix.github.io/blog/2014/06/contribute-groovy-ide.html" data-via="CedricChampeau" data-lang="fr">Tweeter</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
			<div class="g-plusone" data-size="medium" data-href="http://melix.github.io/blog/2014/06/contribute-groovy-ide.html"></div>
		        <script id='fbvpgng2014/06/contribute-groovy-ide.html'>(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//api.flattr.com/button/view/?uid=CedricChampeau&button=compact&url='+encodeURIComponent('http://melix.github.io/blog/2014/06/contribute-groovy-ide.html');f.title='Flattr';f.height=20;f.width=110;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fbvpgng2014/06/contribute-groovy-ide.html');</script>

			<script type="IN/Share" data-url="http://melix.github.io/blog/2014/06/contribute-groovy-ide.html" data-counter="right"></script>
			<div class="fb-like" data-href="http://melix.github.io/blog/2014/06/contribute-groovy-ide.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div>

  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Often people ask us how you can setup a development environment to contribute on the Groovy project. If you use IntelliJ IDEA, it&#8217;s actually very easy, so I decided to make a video for it. It&#8217;s my first screencast ever, I think I will try to do more in the future, so please excuse my hesitations and enjoy! You&#8217;ll notice that apparently Google Hangouts dislikes my face, but hopefully, the screensharing stuff worked ;-)</p>
</div>
<div class="paragraph">
<p>Here&#8217;s the video:</p>
</div>
<iframe width="560" height="315" src="//www.youtube.com/embed/EhJa-Z8XDVw" frameborder="0" allowfullscreen></iframe>
<div class="paragraph">
<p>Of course, you can ask me if you have issues with the setup, but it should really be straightforward!</p>
</div>
</div>
</div></p>
			<p><a href="/blog/2014/06/contribute-groovy-ide.html#disqus_thread">Comments</a></p>
  			<a href="/blog/2014/06/grooid2.html"><h1>Groovy on Android, technical details</h1></a>
  			<p>10 juin 2014</p>
			<p><em>Tags: </em>
		<a href="/blog/tags/groovy.html">groovy</a> 
	
		<a href="/blog/tags/android.html">android</a> 
	
		<a href="/blog/tags/swift.html">swift</a> 
	
		<a href="/blog/tags/gr8conf.html">gr8conf</a> 
	</p>
			<a href="https://twitter.com/share" class="twitter-share-button" data-text="Groovy on Android, technical details" data-url="http://melix.github.io/blog/2014/06/grooid2.html" data-via="CedricChampeau" data-lang="fr">Tweeter</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
			<div class="g-plusone" data-size="medium" data-href="http://melix.github.io/blog/2014/06/grooid2.html"></div>
		        <script id='fbvpgng2014/06/grooid2.html'>(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//api.flattr.com/button/view/?uid=CedricChampeau&button=compact&url='+encodeURIComponent('http://melix.github.io/blog/2014/06/grooid2.html');f.title='Flattr';f.height=20;f.width=110;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fbvpgng2014/06/grooid2.html');</script>

			<script type="IN/Share" data-url="http://melix.github.io/blog/2014/06/grooid2.html" data-counter="right"></script>
			<div class="fb-like" data-href="http://melix.github.io/blog/2014/06/grooid2.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div>

  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In my previous <a href="http://melix.github.io/blog/2014/06/grooid.html">post</a>, I have introduced how we could now use the <a href="http://groovy.codehaus.org">Groovy language</a> to develop Android applications. In this post, I will give you more details about how it works internally, giving you more hints about what makes it possible.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compiling_groovy">Compiling Groovy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="http://groovy.codehaus.org">Groovy language</a> is a JVM language which compiles to bytecode. Even if it has scripting capabilities, it&#8217;s always compiled. This means that in Groovy, you have two options: either a class is compiled to a <code>.class</code> file and used like any other class file on the JVM, using the <code>groovyc</code> compiler instead of <code>javac</code>, or a class can be compiled <strong>at runtime</strong>, for example if you rely on scripting. In the last case, the source script (or any Groovy source in general, not necessarily scripts) is available at runtime, and you rely on APIs that Groovy provide to compile those sources and execute them while your application is running. This is typical of scripting languages, but you must be aware that in any case, Groovy is <strong>not</strong> an interpreted language: everything is turned into bytecode.</p>
</div>
<div class="sect2">
<h3 id="_a_classic_android_application">A classic Android application</h3>
<div class="paragraph">
<p>Since the Dalvik VM doesn&#8217;t use the same bytecode as the JVM, Android requires a bit of work in order to compile and execute Java programs. A special tool, called <em>dex</em>, is responsible for converting the JVM bytecode into Dalvik bytecode, and compile it into a <code>classes.dex</code> file. This is illustrated in the following schema:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="compilation_process_normal.png" alt="Classic Android compilation process">
</div>
</div>
<div class="paragraph">
<p>In our case, we&#8217;re using the Gradle build tool, which is now the default for Android projects, so Gradle is responsible for this chain. Java sources are compiled into <code>.class</code> files, then those classes are processed by the <code>dex</code> tool, which converts bytecode for all classes and packages everything into a <code>classes.dex</code> file. Some additional steps can be done (such as calling ProGuard to reduce the size of the package), but in the end, an APK is produced, which is the deliverable application. When deployed on the device, there&#8217;s nothing else to do than loading the classes and executing the application.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s see how the process differs in case of a Groovy application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_an_application_written_in_groovy">An application written in Groovy</h3>
<div class="paragraph">
<p>In this case, we have <code>.groovy</code> files, corresponding to Groovy sources, but we may also have <code>.java</code> files. In the end, the process looks very similar:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="compilation_process_groovy.png" alt="Groovy Android compilation process">
</div>
</div>
<div class="paragraph">
<p>This schema exactly illustrates how the <a href="https://github.com/melix/gr8confagenda">GR8Conf Agenda</a> application is compiled. All is done at <strong>compile time</strong>, and nothing more at runtime. Groovy sources are compiled into JVM bytecode, which is in turn converted into Dalvik bytecode using <code>dex</code>. There&#8217;s absolutely no difference with Java, apart from the compiler, which is able to process both Groovy and Java sources!</p>
</div>
<div class="paragraph">
<p>One noticeable difference that some people have already reported to me is that since we embed the Groovy runtime, the number of method descriptors used in the <code>classes.dex</code> file is significantly higher than with an application written in pure Java. From my early tests, a Groovy application would consume around 8k methods, without optimizations. The <code>classes.dex</code> file has a limit of 65536 methods, so this is something you have to keep in mind. Anyway, I am not an Android specialist, but there seem to be workarounds available, like the <code>multi-dex</code> option.</p>
</div>
<div class="paragraph">
<p>In the end, Groovy is not different from any other library you would embed in your application, it&#8217;s "just" an additional jar. I also mentionned the fact that I recommended to use <code>@CompileStatic</code> on your classes. There&#8217;s a good reason for that. If you don&#8217;t, the classes that you will compile will use the <strong>dynamic runtime</strong> of Groovy. This is unlikely what you want on a mobile application, especially because on Android, it would use reflection, implying a major performance drop. On a normal JVM, Groovy would use call site caching techniques, like generation of classes at runtime or invokedynamic to improve performance. This is <strong>not</strong> possible on Android, so places where you use dynamic features of Groovy should be limited to small parts of the application, called not frequently. A good example would be the use of a builder for the UI. Builders are a very nice feature of Groovy, and for a UI, it would only be called once when the activity is loaded.</p>
</div>
<div class="paragraph">
<p>Using <code>@CompileStatic</code>, you will ensure that your classes are <strong>statically compiled</strong>, meaning that all method calls are resolved at compile time, leading to dramatically improved performance, very close, if not equal, to that of Java (depending on how you write your code, as usual, because idiomatic Groovy might not always be the fastest implementation).</p>
</div>
<div class="paragraph">
<p>In any case, you must recall that the first application that I wrote does not use a single class generated at runtime. Even if you remove all <code>@CompileStatic</code> annotations, it would use the dynamic runtime, but <strong>without</strong> creating classes at runtime.</p>
</div>
</div>
<div class="sect2">
<h3 id="_runtime_scripting">Runtime scripting</h3>
<div class="paragraph">
<p>One of the difficulties of adapting the <a href="http://groovy.codehaus.org">Groovy language</a> is that, as we said, Groovy is a highly dynamic language. One of its capabilities is executing scripts at runtime. So what if we wanted to type a Groovy script on the device, and execute it directly on it? Is it possible? In fact, yes, it is possible, given that you follow this process:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="compilation_process_runtime.png" alt="Groovy Android compilation process at runtime">
</div>
</div>
<div class="paragraph">
<p>You can have an application, written in Groovy or not, but in the end, <strong>once the application is running</strong>, you have Groovy source code that you want to execute. Then it needs to compile the classes, call <code>dex</code> <strong>directly on the device</strong>, package the result into a <code>jar</code> file on the local filesystem, then load it using a special classloader. So why this is possible, the process is very complex, not straightforward, but more importantly, it is dramatically slow.</p>
</div>
<div class="paragraph">
<p>This process is demonstrated in <a href="https://github.com/melix/grooidshell-example">this application</a>, which replicates the behavior of the well-known <a href="http://beta.groovy-lang.org/docs/groovy-2.3.2/html/documentation/#integ-groovyshell">GroovyShell</a> but directly on an Android device. To give you an idea, on my own device, a Samsung Galaxy Note 3, starting the application, written in Groovy, is blazing fast. Then if you hit the "execute" button, the first time, compilation of the little script will take around 3s.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="groovy-scripting.png" alt="Compiling Groovy at runtime">
</div>
</div>
<div class="paragraph">
<p>Subsequent compilations take much less time (around ~500ms), but the fact of having to dex files and write them to the filesystem is a performance killer. In anycase, this shows that it is possible, and even that you could rely on it for an application that would handle scripts. It would be possible, for example, to cache the jar files in order to avoid recompiling them&#8230;</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this post, I gave further details on how Groovy gets running onto an Android device. In a future post, I will give you more details about how you can get started with your own project. I will maybe give <a href="https://github.com/pledbrook/lazybones">Lazybones</a>, a project bootstraping tool, more love in the next days ;-)</p>
</div>
</div>
</div></p>
			<p><a href="/blog/2014/06/grooid2.html#disqus_thread">Comments</a></p>
  			<a href="/blog/2014/06/grooid.html"><h1>Groovy on Android</h1></a>
  			<p>05 juin 2014</p>
			<p><em>Tags: </em>
		<a href="/blog/tags/groovy.html">groovy</a> 
	
		<a href="/blog/tags/android.html">android</a> 
	
		<a href="/blog/tags/swift.html">swift</a> 
	
		<a href="/blog/tags/gr8conf.html">gr8conf</a> 
	</p>
			<a href="https://twitter.com/share" class="twitter-share-button" data-text="Groovy on Android" data-url="http://melix.github.io/blog/2014/06/grooid.html" data-via="CedricChampeau" data-lang="fr">Tweeter</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
			<div class="g-plusone" data-size="medium" data-href="http://melix.github.io/blog/2014/06/grooid.html"></div>
		        <script id='fbvpgng2014/06/grooid.html'>(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//api.flattr.com/button/view/?uid=CedricChampeau&button=compact&url='+encodeURIComponent('http://melix.github.io/blog/2014/06/grooid.html');f.title='Flattr';f.height=20;f.width=110;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fbvpgng2014/06/grooid.html');</script>

			<script type="IN/Share" data-url="http://melix.github.io/blog/2014/06/grooid.html" data-counter="right"></script>
			<div class="fb-like" data-href="http://melix.github.io/blog/2014/06/grooid.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div>

  			<p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Yesterday ended <a href="http://gr8conf.eu">GR8Conf Europe</a>, a <a href="http://groovy.codehaus.org">Groovy language</a> conference in Copenhagen that was once again a successful event.
I want to thank the crew again for this, and of course the <a href="http://groovy.codehaus.org">Groovy language</a> community which is so friendly and always helpful. This year
turned out to be very special for me, because just two days after the announcement by Apple of the <a href="https://developer.apple.com/library/prerelease/ios/documentation/swift/conceptual/swift_programming_language/index.html">Swift language</a>, I was talking about
running Groovy on Android! As Guillaume Laforge <a href="http://glaforge.appspot.com/article/apple-s-swift-programming-language-inspired-by-groovy">noticed</a>, there
are a lot of similarities between the <a href="https://developer.apple.com/library/prerelease/ios/documentation/swift/conceptual/swift_programming_language/index.html">Swift language</a> and <a href="http://groovy.codehaus.org">Groovy language</a>.</p>
</div>
<div class="paragraph">
<p>The timing is almost perfect, because Android users will want to have a language which is as modern as Swift is, but running on Android. And I see no
better candidate than <a href="http://groovy.codehaus.org">Groovy language</a> here.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_presentation">The presentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Should you be interested in the slides, you can find them below. Since it was presented at <a href="http://gr8conf.eu">GR8Conf Europe</a>, it gives a bit of history of the changes needed to
have the runtime working on Android too:</p>
</div>
<script async class="speakerdeck-embed" data-id="e8e58fc0cdee0131f20616308848c4b8" data-ratio="1.6" src="//speakerdeck.com/assets/embed.js"></script>
<div class="paragraph">
<p>For those of you who are new to Groovy, you have to know that this language is derived from Java, meaning that the learning curve is almost 0, but it also
removes a lot of its verbosity and adds a lot of features to it, such as closures (similar to lambdas in Java 8, but Java 8 is not available for Android
developers), builders, runtime and compile-time metaprogramming.</p>
</div>
<div class="paragraph">
<p>As an example of how Groovylang can be used to reduce the verbosity of Java on Android, I will take a simple example: asynchronous tasks. Asynchronous tasks
are required as soon as a task takes too much time to be executed on the UI thread. That is the case, by default, for any network based operations, in order
to guarantee that the UI remains snappy even if network is slow or unavailable. The problem is that those asynchronous tasks are incredibly verbose. You have
to write a lot of code, that I would tend to name "inner class hell", just for this. Let&#8217;s imagine that you need to parse a JSON feed, then update the UI
accordingly. Then you would have to write something like this (no kidding):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint java language-java"><code>public class FeedActivity {
    TextView mTextView;

    ...

    void updateFeed() {
    	new FeedTask().execute("http://path/to/feed");
    }

    class FeedTask extends AsyncTask&lt;String, Void, String&gt; {
        protected String doInBackground(String... params) {
            DefaultHttpClient httpclient = new DefaultHttpClient(new BasicHttpParams());
            HttpPost httppost = new HttpPost(params[0]);

            InputStream inputStream = null;
            String result = null;
            try {
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();

                inputStream = entity.getContent();
                // json is UTF-8 by default
                BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"), 8);
                StringBuilder sb = new StringBuilder();

                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line).append("\n");
                }
                result = sb.toString();
            } catch (Exception e) {
                // Oops
            } finally {
                try {
                    if (inputStream != null) {
                        inputStream.close();
                    }
                } catch (Exception squish) {
                }
            }
            StringBuilder speakers = null;
            try {
                JSONObject jObject = new JSONObject(result);
                JSONArray jArray = jObject.getJSONArray("speakers");
                speakers = new StringBuilder();
                for (int i = 0; i &lt; jArray.length(); i++) {
                    speakers.append(jArray.getString(i));
                    speakers.append(" ");
                }
            } catch (JSONException e) {
                // do something?
            }
            return speakers.toString();
        }

        @Override
        protected void onPostExecute(String s) {
            mTextView.setText(s);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>So now, let&#8217;s see the equivalent in Groovy (no kidding either):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint groovy language-groovy"><code>public class FeedActivity {
    TextView mTextView

    ...

    void updateFeed() {
    	Fluent.async {
            def json = new JsonSlurper().parse([:], new URL('http://path/to/feed'), 'utf-8')
            json.speakers.join(' ')
        } then {
	    mTextView.setText(it)
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>I think you can start to see the advantage of using Groovy in your own Android projects. Of course, the <code>Fluent</code> class that I&#8217;m using here
is a support class which I implemented in my <a href="https://github.com/melix/gr8confagenda">first Android project</a> (which is open sourced btw), but it&#8217;s
really simple and gives an example of how Android users could benefit from Groovification of their APIs.</p>
</div>
<div class="sect2">
<h3 id="_feeling_the_pain">Feeling the pain</h3>
<div class="paragraph">
<p>This is actually a key point of my talk: I hadn&#8217;t written any Android application before this talk, and I definitely wanted to be able to write
an application in Groovy on Android. Why? Because it&#8217;s been some time already that I use Groovy everyday, and there&#8217;s no turning back. I wanted
to feel the pain of the Java developers on Android, so that I can write better tools for them. And that&#8217;s actually where you, as a user, come
in action: there are so many Groovy libraries out there whose sole objective is to ease the pain, make things that shouldn&#8217;t be complicated a breeze.
This is exactly the point. My example with <code>Fluent</code> is <strong>one</strong> example of simplification of usages of Android APIs, but you have many more to invent,
especially because <strong>you</strong> must have been as annoyed as I did by all those asynchronous tasks, XML files (think of builders!), callback hell, etc&#8230;</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_beginning_of_a_new_era">The beginning of a new era</h3>
<div class="paragraph">
<p>In upcoming posts, I will try to demonstrate that we&#8217;re just at the beginning. Some people are already asking for a {swift} alternative for Android.
It&#8217;s there guys, you have it, so spread the word and let&#8217;s make it happen! I am convinced that it is the beginning of a new era for Android and Groovy.
Google already switched their main build system to Gradle, which is, by the way, using Groovy, so I think it&#8217;s time to move over and show your love!</p>
</div>
<div class="paragraph">
<p>All you need to get started is explained in the slide deck above, and you can find the source code of the sample android application on GitHub:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/melix/gr8confagenda">https://github.com/melix/gr8confagenda</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Update 2: build instructions with the Gradle plugin</em></p>
</div>
<div class="paragraph">
<p>You can now use a Gradle plugin to integrate Groovy with Android. The plugin can be found here: <a href="https://github.com/melix/groovy-android-gradle-plugin">groovy-android-gradle-plugin</a>. As of version 0.2, the plugin supports the Android plugin 0.10+.</p>
</div>
<div class="paragraph">
<p><em>Update: build instructions</em></p>
</div>
<div class="paragraph">
<p>If you want to try it by yourself, here&#8217;s how you can do it. First of all, official support for Android will be in Groovy 2.4. Before the first beta,
you&#8217;ll have to build it from sources, and here is the quickest way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>git clone https://github.com/melix/groovy-core.git --branch master
cd groovy-core
./gradlew -PskipIndy=true install</pre>
</div>
</div>
<div class="paragraph">
<p>Then you can clone the sample application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cd ..
git clone https://github.com/melix/gr8confagenda.git</pre>
</div>
</div>
<div class="paragraph">
<p>This contains a project that you can open using <a href="http://developer.android.com/sdk/installing/studio.html">Android Studio</a>.</p>
</div>
<div class="paragraph">
<p>If you want to use the <a href="http://groovy.codehaus.org">Groovy language</a> in your own Android project, a requirement is that it is using Gradle. If so, you can update your <code>build.gradle</code> file
as is:</p>
</div>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="prettyprint groovy language-groovy"><code>android {
   ...
   packagingOptions {
        // workaround for http://stackoverflow.com/questions/20673625/android-gradle-plugin-0-7-0-duplicate-files-during-packaging-of-apk
        exclude 'META-INF/LICENSE.txt'
        exclude 'META-INF/groovy-release-info.properties'
    }
}

repositories {
    mavenLocal()
    jcenter()
}

dependencies {
    compile 'org.codehaus.groovy:groovy:2.4.0-SNAPSHOT:grooid'
    // the following dependency is necessary if you want JSON support
    compile ('org.codehaus.groovy:groovy-json:2.4.0-SNAPSHOT') {
        transitive = false
    }
}

// add support for Groovy to existing configurations
android.applicationVariants.all {
    task "groovy${name}Compile"(type: GroovyCompile) {
        source = javaCompile.source + fileTree('src/main/java').include('**/*.groovy')
        destinationDir = javaCompile.destinationDir
        classpath = javaCompile.classpath
        groovyClasspath = classpath
        sourceCompatibility = '1.6'
        targetCompatibility = '1.6'
        doFirst {
            def runtimeJars = plugins.findPlugin(com.android.build.gradle.AppPlugin).runtimeJars
            classpath = files(runtimeJars) + classpath
        }
    }
    javaCompile.dependsOn("groovy${name}Compile")
    javaCompile.enabled = false
}
</code></pre>
</div>
</div>
<div class="paragraph">
<p>And that&#8217;s all! Now, one option for you is to write support libraries and make them available to the community. Enjoy!</p>
</div>
</div>
</div>
</div></p>
			<p><a href="/blog/2014/06/grooid.html#disqus_thread">Comments</a></p>
	
	<hr />
	
	<p>Older posts are available in the <a href="/blog/archive.html">archive</a>.</p>

		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
	<p class="muted credit">All posts on this blog are published with a <em>Creative Commons by-nc-sa</em> license.<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/2.0/fr/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/2.0/fr/88x31.png"/></a></p>
        <p class="muted credit">&copy; 2013 | Mixed with <a href="http://twitter.github.com/bootstrap/">Bootstrap v3.0.3</a> | Baked with <a href="http://jbake.org">JBake v2.3.0</a></p>
      </div>
    </div>
    
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/blog/js/jquery-1.9.1.min.js"></script>
    <script src="/blog/js/bootstrap.min.js"></script>
    <script src="/blog/js/run_prettify.js"></script>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    <script type="text/javascript">
    var disqus_shortname = 'melixblog';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
<script type="text/javascript">
  window.___gcfg = {lang: 'fr'};

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45962373-1', 'melix.github.io');
  ga('send', 'pageview');

</script>
<script src="http://cdn.lanyrd.net/badges/person-v1.min.js"></script>
  </body>
</html>
